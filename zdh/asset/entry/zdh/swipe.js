define("entry/zdh/swipe",["require","exports","module"],function(){function e(e,t){function n(){if(g=y.children,m=new Array(g.length),v=e.getBoundingClientRect().width||e.offsetWidth,y.style.width=g.length*v+"px",t.showRate)v*=t.showRate;for(var n=g.length;n--;){var r=g[n];if(r.style.width=v+"px",r.setAttribute("data-index",n),h.transitions)r.style.left=n*-v+"px",s(n,x>n?-v:n>x?v:0,0)}if(!h.transitions)y.style.left=x*-v+"px";e.style.visibility="visible"}function r(){if(x)o(x-1);else if(t.continuous)o(g.length-1)}function i(){if(x<g.length-1)o(x+1);else if(t.continuous)o(0)}function o(e,n){if(x!=e){if(h.transitions){for(var r=Math.abs(x-e)-1,i=Math.abs(x-e)/(x-e);r--;)s((e>x?e:x)-r-1,v*i,0);s(x,v*i,n||b),s(e,0,n||b)}else l(x*-v,e*-v,n||b);x=e,d(t.callback&&t.callback(x,g[x]))}}function s(e,t,n){a(e,t,n),m[e]=t}function a(e,t,n){var r=g[e],i=r&&r.style;if(i)i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+t+"px,0)translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+t+"px)"}function u(){for(var e=g.length,t=0;t<g.length;++t){var n=g[t],r=n&&n.style;if(r)r.zIndex=e-Math.abs(t-x);else;}}function l(e,n,r){if(!r)return void(y.style.left=n+"px");var i=+new Date,o=setInterval(function(){var s=+new Date-i;if(s>r){if(y.style.left=n+"px",C)c();return t.transitionEnd&&t.transitionEnd.call(event,x,g[x]),void clearInterval(o)}y.style.left=(n-e)*(Math.floor(s/r*100)/100)+e+"px"},4)}function c(){w=setTimeout(i,C)}function f(){C=0,clearTimeout(w)}var p=function(){},d=function(e){setTimeout(e||p,0)},h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))};if(e){var g,m,v,y=e.children[0];t=t||{};var x=parseInt(t.startSlide,10)||0,b=t.speed||300;t.continuous=t.continuous?t.continuous:!0;var w,T,C=t.auto||0,E={},N={},k={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":d(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(e));break;case"resize":d(n.call())}if(t.stopPropagation)e.stopPropagation()},start:function(e){var t=e.touches[0];E={x:t.pageX,y:t.pageY,time:+new Date},T=void 0,N={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale)){if(t.disableScroll)e.preventDefault();var n=e.touches[0];if(N={x:n.pageX-E.x,y:n.pageY-E.y},"undefined"==typeof T)T=!!(T||Math.abs(N.x)<Math.abs(N.y));if(!T)e.preventDefault(),f(),N.x=N.x/(!x&&N.x>0||x==g.length-1&&N.x<0?Math.abs(N.x)/v+1:1),a(x-1,N.x+m[x-1],0),a(x,N.x+m[x],0),a(x+1,N.x+m[x+1],0)}},end:function(){var e=+new Date-E.time,n=Number(e)<250&&Math.abs(N.x)>20||Math.abs(N.x)>v/2,r=!x&&N.x>0||x==g.length-1&&N.x<0,i=N.x<0;if(!T)if(n&&!r){if(i)s(x-1,-v,0),s(x,m[x]-v,b),s(x+1,m[x+1]-v,b),x+=1;else s(x+1,v,0),s(x,m[x]+v,b),s(x-1,m[x-1]+v,b),x+=-1;t.callback&&t.callback(x,g[x]),u()}else s(x-1,-v,b),s(x,0,b),s(x+1,v,b);y.removeEventListener("touchmove",k,!1),y.removeEventListener("touchend",k,!1)},transitionEnd:function(e){if(parseInt(e.target.getAttribute("data-index"),10)==x){if(C)c();t.transitionEnd&&t.transitionEnd.call(e,x,g[x])}}};if(n(),u(),C)c();if(h.addEventListener){if(h.touch)y.addEventListener("touchstart",k,!1);if(h.transitions)y.addEventListener("webkitTransitionEnd",k,!1),y.addEventListener("msTransitionEnd",k,!1),y.addEventListener("oTransitionEnd",k,!1),y.addEventListener("otransitionend",k,!1),y.addEventListener("transitionend",k,!1);window.addEventListener("resize",k,!1)}else window.onresize=function(){n()};return{setup:n,slide:o,prev:function(){f(),r()},next:function(){f(),i()},getPos:function(){return x},kill:function(){f(),y.style.width="auto",y.style.left=0;for(var e=g.length;e--;){var t=g[e];if(t.style.width="100%",t.style.left=0,h.transitions)a(e,0,0)}if(h.addEventListener)y.removeEventListener("touchstart",k,!1),y.removeEventListener("webkitTransitionEnd",k,!1),y.removeEventListener("msTransitionEnd",k,!1),y.removeEventListener("oTransitionEnd",k,!1),y.removeEventListener("otransitionend",k,!1),y.removeEventListener("transitionend",k,!1),window.removeEventListener("resize",k,!1);else window.onresize=null}}}}return e});