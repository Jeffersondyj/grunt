define("ajax",["require","exports","module","common/logger/ajaxLogger","common/logger/ErrorLogger","common/utils/strings","jquery","flags"],function(require){var n=require("common/logger/ajaxLogger"),e=require("common/logger/ErrorLogger"),o=require("common/utils/strings"),r=require("jquery"),t=function(t,a){a=a||{};var i=r.Deferred(),g=a.data||{},s=null,u=t.indexOf("?")>=0?t.split("?")[1]:"";if(t=t.substring(0,t.indexOf("?")>=0?t.indexOf("?"):t.length),a.isLog||(s=n.mark(t,g)),require("flags").isOn("ENABLE_LOCAL_AJAX"))r.getJSON("../"+t+(u?"?":"")+u,g).done(function(e){s&&n.log(s),i.resolve(e)}).fail(function(n){e.warning("网络异常: "+n.status),i.reject("Exception")});else r.ajax({url:t+(u?"?":"")+u,type:a.method,data:o.stringify(g),cache:!1,dataType:"json",contentType:"application/json"}).done(function(e){s&&n.log(s),i.resolve(e)}).fail(function(n){e.warning("网络异常: "+n.status),i.reject("Exception")});return i.promise()};return{ajax:function(n,e,o){return t(n,{method:e,data:o})},log:function(n,e){return t(n,{isLog:!0,data:e})}}}),define("common/ajax/Ajax",["ajax"],function(n){return n});